<app-navbar> </app-navbar>
<div class=" ">
    <div class="container">
        <div class="row">
            <div class="col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                <div class="ui-block">
                    <div class="top-header">
                        <div class="top-header-thumb ">
                            <div class=" " style="height: 250px;">
                                <div class="animatedBackground"></div>
                                <!-- <img [src]="user.background | nobackground" alt="Portada" /> -->
                            </div>
                        </div>
                        <div class="profile-section"></div>
                        <div class="top-header-author">
                            <img class="author-thumb" [src]="user.profilePicture | noiconimage" alt="author" />
                            <div class="author-content">
                                <a class="h4 author-name">{{ user.name | titlecase }} {{ user.lastName | titlecase }} </a>
                                <div class="country">{{ user.career }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ... end Top Header-Profile -->

    <div class="container">
        <div class="row">
            <div class="col col-xl-4 order-xl-1 col-lg-4 order-lg-1 col-md-12 order-md-1 col-sm-12 col-12">
                <div class="ui-block">

                    <div class="ui-block-title">
                      <h6 class="title">Calificar ultimas tutorias</h6>
                    </div>
                    <!-- W-Action -->
                    <div class="" *ngIf="!user.isTutor; else noEndedSession">
                      <div *ngFor="let tutor of newTutors">
                      <ul class="widget w-friend-pages-added notification-list friend-requests">
                        <li class="inline-items">
                          <div class="notification-event">
                              <a class="h6 notification-friend">{{tutor.name}}</a>
                            <span class="chat-message-item">Tutor</span>
                          </div>
                            
                                <a class="social-item bg-blue text-white .modal-button" (click) = "clickRateTutor(tutor.name)" data-toggle="modal" data-target="#rate-tutor" >
                                  Calificar
                                </a>
                          </li> 
                      </ul>
                      </div>
                    </div>
                    <!-- ... end W-Action -->
                    <ng-template #noEndedSession>
                      <div class="ui-block-content">
                        <div class="content text-center">
                            <div class="author-content">
                                <h4 class="country">
                                    No tienes tutores que calificar
                                </h4>
                            </div>
                        </div>
                      </div>
                    </ng-template>
                  </div>
              
                <div class="ui-block">
                    <div class="ui-block-title">
                        <h6 class="title">Materias de Tutoria {{ username }}</h6>
                    </div>
                    <div class="ui-block-content">
                        <div class="" *ngIf="user.isTutor; else addSubject">
                            <div *ngFor="let course of user.courses">
                                <div class="birthday-item inline-items border border-light rounded  m-2" style="padding-left:0px; padding-right: 15px;">
                                    <div class="birthday-author-name " style="width: 50%;">
                                        <a href="# " class="h6 author-name ">{{ course.name }}</a>

                                        <div class="birthday-date ">
                                            {{ course.code }}
                                            <!-- <Strong>4.7</Strong> -->
                                        </div>
                                    </div>

                                    <a *ngIf="id !== 'user'" class="btn btn-sm bg-blue" style="color: #fff; padding-left: 0px; padding-right: 0px; width: 35%;;">Solicitar Tutoria</a>
                                </div>
                            </div>
                        </div>
                        <ng-template #addSubject>
                            <div class="content text-center">
                                <div class="">
                                    <i class="fas fa-plus-square add-Subject"></i>
                                </div>
                                <div class="author-content">
                                    <h4 class="country">
                                        Conviértete en Tutor agregando materias
                                    </h4>
                                </div>
                            </div>
                        </ng-template>
                    </div>
                </div>
                <div class="ui-block">
                    <div class="ui-block-title">
                        <h6 class="title">Informacion Personal</h6>
                    </div>
                    <div class="ui-block-content">
                        <!-- W-Personal-Info -->


                        <ul class="widget w-personal-info">
                            <li>
                                <span class="title">Descripcion:</span>
                                <span class="text">{{ user.description }}</span>
                            </li>
                            <li>
                                <span class="title">Email:</span>
                                <span class="text">{{ user.email }}</span>
                            </li>
                            <li>
                                <span class="title">Carrera:</span>
                                <span class="text">{{ user.career }}</span>
                            </li>
                            <li>
                                <span class="title">Promedio</span>
                                <span class="text">{{ user.gpa }}</span>
                            </li>
                            <li>
                                <span class="title">Telefono</span>
                                <span class="text">{{ user.phoneNumber }}</span>
                            </li>
                            <li>
                                <span class="title">Precio por tutoría</span>
                                <span class="text">{{ user.price }}</span>
                            </li>
                        </ul>


                        <div class="widget w-socials" *ngIf="isUser()">
                            <a class="social-item bg-blue text-white">
                                <i class="fas fa-address-book" aria-hidden="true"></i> Historial
                            </a>
                            <a class="social-item bg-blue text-white .modal-button" data-toggle="modal" data-target="#edit-photo">
                                <i class="fas fa-plus-square" aria-hidden="true"></i> Editar Foto de Perfil
                            </a>
                            <a class="social-item bg-blue btn text-white .modal-button" data-toggle="modal" data-target="#edit-profile">
                                <i class="fas fa-edit" aria-hidden="true"></i> Editar Informacion
                            </a>
                            <a class="social-item bg-blue text-white" data-toggle="modal" data-target="#create-friend-group-1">
                                <i class="fas fa-plus-circle" aria-hidden="true"></i> Añadir Materia
                            </a>
                        </div>
                        <div class="widget w-socials" *ngIf="!isUser()">

                            <a *ngIf="id !== 'user'" data-toggle="modal" data-target="#edit-my-poll-popup" class="btn btn-sm bg-blue w-100" style="color: #fff; padding-left: 0px; padding-right: 0px; width: 35%;;">Contactar  <i class="fas fa-comments"></i></a>
                        </div>

                        =


                        <!-- ... end W-Socials -->
                    </div>
                </div>
                <div class="ui-block">
                    <div class="ui-block-title">
                        <h6 class="title">Algunos Tutores Nuevos</h6>
                    </div>
                    <ul class="widget w-friend-pages-added notification-list friend-requests">
                        <li *ngFor="let tutor of newTutors" class="inline-items">
                            <div class="author-thumb">
                                <img class="author-thumb" [src]="tutor.profilePicture | noimage" alt="author" />
                            </div>
                            <div class="notification-event">
                                <a [routerLink]="['/profile', tutor._id]" class="h6 notification-friend">{{ tutor.name }} {{ tutor.lastName }}</a>
                <span class="chat-message-item">{{ tutor.career }}</span>
              </div>
            </li>
          </ul>

          <!-- ... end W-Action -->
        </div>
      </div>
      <div
        class="col col-xl-8 order-xl-2 col-lg-8 order-lg-2 col-md-12 order-md-2 col-sm-12 col-12"
      >

                <!-- Calendario -->
                <div  class="ui-block" style="padding: 20px;">

                  <!-- Calendario de otro tutor -->
                  <full-calendar
                    *ngIf="id!=='user'; else elseBlock"
                    defaultView="dayGridMonth"
                    [plugins]="calendarPlugins"
                    [weekends]="calendarWeekends"
                    [events]="calendarEvents"
                    [header]="calendarHeader"
                    selectable = "true"
                  ></full-calendar>

                  <!-- Calendario propio cuando se es Tutor -->

                  <ng-template #elseBlock>
                    <full-calendar 
                    *ngIf="user.isTutor; else noTutorBlock"
                    name="#calendar"
                    defaultView="dayGridMonth"
                    [plugins]="calendarPlugins"
                    [weekends]="calendarWeekends"
                    [events]="calendarEvents"
                    [header]="calendarHeader"
                    selectable = "true"
                    (eventClick) = "editEvent($event)"
                    (dateClick)="newEvent($event)"
                    ></full-calendar>
                  </ng-template>

                  <!-- Calendario propio cuando no se es Tutor -->

                  <ng-template #noTutorBlock>
                    <full-calendar 
                    name="#calendar"
                    defaultView="dayGridMonth"
                    [plugins]="calendarPlugins"
                    [weekends]="calendarWeekends"
                    [events]="[
                      { title: 'event 2', date: '2019-11-19' }
                    ]"
                    [header]="calendarHeader"
                    selectable = "true"
                    ></full-calendar>
                  </ng-template>

                </div>
                
                <button id="openModalButton" [hidden]="true" data-toggle="modal" data-target="#new-event"></button>
                <button id="update" [hidden]="true" data-toggle="modal" data-target="#update-event"></button>

                
                <!-- Fin de calendario -->

                <div class="ui-block ">
                  <div class="crumina-module crumina-heading with-title-decoration m-5 ">
                      <h5 class="heading-title ">Comentarios</h5>
                  </div>
                  <ul class="comments-list style-3 ">
                    <li *ngFor="let course of user.courses" class="comment-item ">
                      <div class="post__author-thumb ">
                          <img [src]="user.profilePicture | noiconimage" alt="author " />
                      </div>


                      <div class="comments-content ">
                        <div class="post__author author vcard ">
                          <div class="author-date ">
                            <a class="h6 post__author-name fn " href="# ">
                              {{course.name}}
                            </a>
                          </div>
                        </div>
                        <p>
                            Sed ut perspiciatis unde omnis iste natus error sit voluptatem
                            accusantium der doloremque laudantium.
                        </p>
                      </div>
                    </li>
                  </ul>
                </div>
      </div>
    </div>

    <div
      class="modal animated zoomIn faster"
      id="new-event"
      tabindex="-1"
      role="dialog"
      aria-labelledby="create-event"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered window-popup create-event" role="document">
        <div class="modal-content">

          <div class="modal-header">
            <h6 style="margin: auto;">
              ¿Que tipo de evento deseas agregar?
            </h6>
          </div>

          <div class="modal-body">
            <form (ngSubmit)="onSubmit()">
              <select 
                class="custom-select" 
                style="margin-bottom: 20px;"
                [(ngModel)]="selector"
                name="selector"
                ngModel
              >
                  <option> Disponible </option>
                  <option> Tutoría </option>
              </select>

              <div class="row">
                <button class="btn modal-button" style="margin-left:25%; margin-bottom: 0px; margin-top: 5px;" type="submit">
                  Aceptar
                </button>
                
                <button id="close" class="btn modal-button" style="margin-left: 33px; margin-bottom: 0px; margin-top: 5px;"data-dismiss="modal">
                  Cancelar
                </button>
              </div>
            </form>   

            
          </div>

        </div>
      </div>
    </div>

    <!-- ------------------Otro Modal---------------------------- -->

    <div
      class="modal  animated zoomIn faster"
      id="rate-tutor"
      tabindex="-1"
      role="dialog"
      aria-labelledby="create-event"
      aria-hidden="true"
    >
      <div
        class="modal-dialog modal-dialog-centered window-popup create-event"
        role="document"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h6 class="title">
              Califica a tu tutor
            </h6>
            <div class="cancel-button " data-dismiss="modal">
              <i class="fas fa-window-close"></i>
            </div>
          </div>
          <form #rateTutorForm="ngForm" (ngSubmit)="sendReport(rateTutorForm)">
            <div class="modal-body">       
              <div class="row">
                <div class="col-12">
                  <div class="form-group label-floating">
                    <div class="form-group label-floating">
                      <label for="rateTutorField" class="control-label">Calificacion de 0 a 5</label>
                      <input
                        required
                        ngModel
                        name="rateTutorField"
                        #rateTutorField="ngModel"
                        class="form-control"
                        placeholder=""
                        type="number"
                        step="0.1"
                        [(ngModel)]="userRate"
                        min="0"
                        max="5"
                      />
                      <div
                          class="alert alert-danger"
                          *ngIf="((!rateTutorField.valid) || (userRate < 0 || userRate > 5)) && rateTutorField.touched"
                        >
                          La calificacion no es valida
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              

              <div class="form-group label-floating">
                <label for="userCommentField" class="control-label">Ingrese un comentario sobre que tal fue la tutoria</label>
                <textarea
                  required
                  ngModel
                  name="userCommentField"
                  #userCommentField="ngModel"
                  class="form-control"
                  minlength="10"
                  [(ngModel)]="userComment"
                > {{newDescription}} </textarea>
                <div
                  class="alert alert-danger"
                  *ngIf="userCommentField.touched && !userCommentField.valid"
                >
                  Tu comentario debe ser de al menos 10 caracteres
                </div>
              </div>

              <button class="btn modal-button btn-lg full-width" type="submit">
                Guardar Cambios
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>



    <div
    class="modal animated zoomIn faster"
    id="update-event"
    tabindex="-1"
    role="dialog"
    aria-labelledby="create-event"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered window-popup create-event" role="document">
      <div class="modal-content">

        <div class="modal-header">
          <h6 style="margin: auto;">
            ¿Desea cambiar {{thisEvent}} por {{oppositeEvent}}?
          </h6>
        </div>

        <div class="modal-body">
          <div class="row">
            <button class="btn modal-button" style="margin:auto" (click)="update()">
              Aceptar
            </button>
                
            <button id="closeUpdate" class="btn modal-button" style="margin:auto;" data-dismiss="modal">
              Cancelar
            </button>

            <button class="btn modal-button" style="margin:auto; background-color: red;" (click)="delete()">
              Eliminar
            </button>
          </div>
        </div>

      </div>
    </div>
  </div>


  <div
      class="modal  animated zoomIn faster"
      id="edit-photo"
      tabindex="-1"
      role="dialog"
      aria-labelledby="create-event"
      aria-hidden="true"
    >
      <div
        class="modal-dialog modal-dialog-centered window-popup create-event"
        role="document"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h6 class="title">
              Edita tu foto perfil
            </h6>
            <div class="cancel-button " data-dismiss="modal">
              <i class="fas fa-window-close"></i>
            </div>
          </div>
          <form (ngSubmit)="changeProfileImage()">
            <div class="modal-body">
              <div class="row">

                  <span style="font-size: 17px; width: 25%; margin-top: auto; margin-bottom: 30px; margin-left: 0px;">Foto de perfil</span>

                  <div class="" style="padding-right: 0px;padding-left: 0px;width: 75%;">
                      <input id="file-upload" type="file" (change)="onFileSelected($event)" value="like" accept=".jpeg,.jpg,.png">
                  </div>
              </div>

              <button class="btn modal-button btn-lg full-width" type="submit">
                Guardar Cambios
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>


    <div
      class="modal  animated zoomIn faster"
      id="edit-profile"
      tabindex="-1"
      role="dialog"
      aria-labelledby="create-event"
      aria-hidden="true"
    >
      <div
        class="modal-dialog modal-dialog-centered window-popup create-event"
        role="document"
      >
        <div class="modal-content" *ngIf="!user.isTutor; else editTutorProfile">
          <div class="modal-header">
            <h6 class="title">
              Edita tu Perfil
            </h6>
            <div class="cancel-button " data-dismiss="modal">
              <i class="fas fa-window-close"></i>
            </div>
          </div>
          <form #changeStudentInfoForm="ngForm" (ngSubmit)="changeStudentInfo(changeStudentInfoForm)">
            <div class="modal-body">
              <div class="row">
                <div class="col-6">
                  <div class="form-group label-floating">
                      <label for="newNameStudentField" class="control-label">Nombre</label>
                      <input
                        required
                        ngModel
                        name="newNameStudentField"
                        #newNameStudentField="ngModel"
                        class="form-control"
                        placeholder=""
                        type="text"
                        [(ngModel)]="newName"
                      />
                      <div
                        class="alert alert-danger"
                        *ngIf="newNameStudentField.touched && !newNameStudentField.valid"
                      >
                        El nombre es obligatorio
                      </div>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-group label-floating">
                    <label for="newLastNameStudentField" class="control-label">Apellido</label>
                    <input
                      required
                      ngModel
                      name="newLastNameStudentField"
                      #newLastNameStudentField="ngModel"
                      class="form-control"
                      placeholder=""
                      type="text"
                      [(ngModel)]="newLastName"
                    />
                    <div
                      class="alert alert-danger"
                      *ngIf="newLastNameStudentField.touched && !newLastNameStudentField.valid"
                    >
                      El apellido es obligatorio
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12">
                  <div class="form-group label-floating">
                    <label for="newCareerStudentField" class="control-label">Carrera</label>
                    <input
                      required
                      ngModel
                      name="newCareerStudentField"
                      #newCareerStudentField="ngModel"
                      class="form-control"
                      placeholder=""
                      type="text"
                      [(ngModel)]="newCareer"
                    />
                    <div
                      class="alert alert-danger"
                      *ngIf="newCareerStudentField.touched && !newCareerStudentField.valid"
                    >
                      La carrera es obligatorio
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-6">
                  <div class="form-group label-floating">
                      <label for="newPhoneNumberStudentField" class="control-label">Telefono</label>
                      <input
                        required
                        ngModel
                        name="newPhoneNumberStudentField"
                        #newPhoneNumberStudentField="ngModel"
                        class="form-control"
                        placeholder=""
                        type="number"
                        [(ngModel)]="newPhoneNumber"
                      />
                      <div
                        class="alert alert-danger"
                        *ngIf="newPhoneNumberStudentField.touched && !newPhoneNumberStudentField.valid"
                      >
                        Ingrese un telefono valido
                      </div>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-group label-floating">
                      <label for="newGpaStudentField" class="control-label">P.A.P.A</label>
                      <input
                        required
                        ngModel
                        name="newGpaStudentField"
                        #newGpaStudentField="ngModel"
                        class="form-control"
                        placeholder=""
                        type="number"
                        step="0.1"
                        [(ngModel)]="newGpa"
                        min="0"
                        max="5"
                      />
                      <div
                          class="alert alert-danger"
                          *ngIf="(!newGpaStudentField.valid) || (newGpa < 0 || newGpa > 5)"
                        >
                          El P.A.P.A debe estar entre 0-5
                      </div>
                  </div>
                </div>
              </div>

              <button class="btn modal-button btn-lg full-width" type="submit">
                Guardar Cambios
              </button>
            </div>
          </form>
        </div>

        <ng-template #editTutorProfile>
        <div class="modal-content" >
          <div class="modal-header">
            <h6 class="title">
              Edita tu Perfil
            </h6>
            <div class="cancel-button " data-dismiss="modal">
              <i class="fas fa-window-close"></i>
            </div>
          </div>
          <form #changeTutorInfoForm="ngForm" (ngSubmit)="changeTutorInfo(changeTutorInfoForm)">
            <div class="modal-body">
              <div class="row">
                <div class="col-6">
                  <div class="form-group label-floating">
                    <label for="newNameField" class="control-label">Nombre</label>
                    <input
                      required
                      ngModel
                      name="newNameField"
                      #newNameField="ngModel"
                      class="form-control"
                      placeholder=""
                      type="text"
                      [(ngModel)]="newName"
                    />
                    <div
                      class="alert alert-danger"
                      *ngIf="newNameField.touched && !newNameField.valid"
                    >
                      El nombre es obligatorio
                    </div>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-group label-floating">
                    <label for="newLastNameField" class="control-label">Apellido</label>
                    <input
                      required
                      ngModel
                      name="newLastNameField"
                      #newLastNameField="ngModel"
                      class="form-control"
                      placeholder=""
                      type="text"
                      [(ngModel)]="newLastName"
                    />
                    <div
                      class="alert alert-danger"
                      *ngIf="newLastNameField.touched && !newLastNameField.valid"
                    >
                      El apellido es obligatorio
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-6">
                  <div class="form-group label-floating">
                    <label for="newPriceField" class="control-label"
                      >Precio por tutoria (COP):</label>
                      <input
                      required
                      ngModel
                      name="newPriceField"
                      #newPriceField="ngModel"
                      class="form-control"
                      placeholder=""
                      type="number"
                      step="0.1"
                      [(ngModel)]="newPrice"
                    />
                    <div
                      class="alert alert-danger"
                      *ngIf="(newPriceField.touched && !newPriceField.valid) || newPrice < 0"
                    >
                      Ingrese un precio valido
                    </div>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-group label-floating">
                    <label for="newCareerField" class="control-label">Carrera</label>
                    <input
                      required
                      ngModel
                      name="newCareerField"
                      #newCareerField="ngModel"
                      class="form-control"
                      placeholder=""
                      type="text"
                      [(ngModel)]="newCareer"
                    />
                    <div
                      class="alert alert-danger"
                      *ngIf="newCareerField.touched && !newCareerField.valid"
                    >
                      La carrera es obligatorio
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-6">
                  <div class="form-group label-floating">
                      <label for="newPhoneNumberField" class="control-label">Telefono</label>
                      <input
                        required
                        ngModel
                        name="newPhoneNumberField"
                        #newPhoneNumberField="ngModel"
                        class="form-control"
                        placeholder=""
                        type="number"
                        [(ngModel)]="newPhoneNumber"
                      />
                      <div
                        class="alert alert-danger"
                        *ngIf="newPhoneNumberField.touched && !newPhoneNumberField.valid"
                      >
                        Ingrese un telefono valido
                      </div>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-group label-floating">
                    <div class="form-group label-floating">
                      <label for="newGpaField" class="control-label">P.A.P.A</label>
                      <input
                        required
                        ngModel
                        name="newGpaField"
                        #newGpaField="ngModel"
                        class="form-control"
                        placeholder=""
                        type="number"
                        step="0.1"
                        [(ngModel)]="newGpa"
                        min="0"
                        max="5"
                      />
                      <div
                          class="alert alert-danger"
                          *ngIf="(!newGpaField.valid) || (newGpa < 0 || newGpa > 5)"
                        >
                          El P.A.P.A debe estar entre 0-5
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              

              <div class="form-group label-floating">
                <label for="newDescriptionField" class="control-label">Descripcion</label>
                <textarea
                  required
                  ngModel
                  name="newDescriptionField"
                  #newDescriptionField="ngModel"
                  class="form-control"
                  minlength="25"
                  [(ngModel)]="newDescription"
                > {{newDescription}} </textarea>
                <div
                  class="alert alert-danger"
                  *ngIf="newDescriptionField.touched && !newDescriptionField.valid"
                >
                  Tu descripcion debe tener al menos 25 caracteres
                </div>
              </div>

              <button class="btn modal-button btn-lg full-width" type="submit">
                Guardar Cambios
              </button>
            </div>
          </form>
        </div>
      </ng-template>
      </div>
    </div>

    <div
      class="modal animated zoomIn faster"
      id="create-friend-group-1"
      tabindex="-1"
      role="dialog"
      aria-labelledby="create-friend-group-1"
      aria-hidden="true"
    >
      <div
        class="modal-dialog modal-dialog-centered window-popup create-event"
        role="document"
      >
        <div class="modal-content ">
          <div *ngIf="user.isTutor" class="modal-body ">
            <div *ngIf="!fulltutor(); else noAvaliableSubjects">
              <div class="cancel-button" data-dismiss="modal">
                <i class="fas fa-window-close"></i>
              </div>
              <div class="modal-header justify-content-center">
                <h6 class="title">
                  Agregar materia de tutoria
                </h6>
              </div>
              <form
                class="example-form text-center "
                (ngSubmit)="add_Subject()"
              >
                <mat-form-field
                  class="full-width mb-5
            example-full-width"
                  style="border: 1px solid rgb(222, 226, 230);
      padding: 3px 25px 0;
      border-radius: 6px;;"
                >
                  <label style="font: 14px; ">Busca tu Materia:</label>
                  <input
                    type="text"
                    aria-label="Number"
                    matInput
                    [formControl]="myControl"
                    [matAutocomplete]="auto"
                  />
                  <mat-autocomplete
                    #auto="matAutocomplete"
                    (optionSelected)="getData($event.option.value)"
                  >
                    <mat-option
                      *ngFor="let option of filteredOptions | async"
                      [value]="option"
                    >
                      {{ option }}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
                <div class="button-form">
                  <button
                    class="btn btn-primary btn-md-2 mt-3 modal-button"
                    type="submit"
                  >
                    Añadir
                  </button>
                </div>
              </form>
            </div>
            <ng-template #noAvaliableSubjects>
              <div class=" justify-content-center text-center">
                <h6>
                  Por el momento ya eres tutor de todas las materias que tenemos
                  disponibles
                </h6>
                <button
                  class="btn btn-primary btn-md-2 mt-3 modal-button"
                  data-dismiss="modal"
                >
                  Cerrar
                </button>
              </div>
            </ng-template>
          </div>

          <div *ngIf="!user.isTutor" class="modal-body">
            <h6 class="title">
              Estas a punto de convertirte en tutor
            </h6>
            <label class="control-label"
              >Escribe una breve descripcion de ti como tutor y elige la primera
              materia de la cual quieres ser tutor</label
            >
            <form
              #logInForm="ngForm"
              (ngSubmit)="becomeTutor()"
              novalidate
              class="content"
            >
              <div class="row">
                <div class="col col-12 col-xl-12 col-lg-12 col-md-12 col-sm-12">
                  <div class="form-group label-floating">
                    <label for="email" class="control-label"
                      >Descripcion:</label
                    >
                    <textarea
                      required
                      ngModel
                      name="description"
                      #email="ngModel"
                      class="form-control"
                      minlength="25"
                      [(ngModel)]="description"
                    ></textarea>
                    <div
                      class="alert alert-danger"
                      *ngIf="email.touched && !email.valid"
                    >
                      Tu descripcion debe tener al menos 25 caracteres
                    </div>
                  </div>
                  
                  <div class="form-group label-floating">
                      <label for="price" class="control-label"
                        >Precio por tutoria (COP):</label
                      >
                      <input
                        required
                        ngModel
                        name="price"
                        #number="ngModel"
                        class="form-control"
                        placeholder=""
                        type="number"
                        step="0.1"
                        [(ngModel)]="price"
                      />
                      <div
                        class="alert alert-danger"
                        *ngIf="(number.touched && !number.valid) || price < 0"
                      >
                        Ingrese un precio valido
                      </div>
                  </div>
                  
                  

                  <mat-form-field
                    class="full-width mb-5
                    example-full-width"
                    style="border: 1px solid;
                    padding: 3px 25px 0;
                    border-radius: 6px;;"
                  >
                    <label style="font: 14px;">Busca tu Materia:</label>
                    <input
                      type="text"
                      aria-label="Number"
                      matInput
                      [formControl]="myControl"
                      [matAutocomplete]="auto"
                    />
                    <mat-autocomplete
                      #auto="matAutocomplete"
                      (optionSelected)="getData($event.option.value)"
                    >
                      <mat-option
                        *ngFor="let option of filteredOptions | async"
                        [value]="option"
                      >
                        {{ option }}
                      </mat-option>
                    </mat-autocomplete>
                  </mat-form-field>
                  <button
                    class="btn btn-lg btn-primary full-width modal-button"
                    type="submit"
                  >
                    Añadir
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="modal  animated zoomIn faster" id="edit-my-poll-popup">
      <div
        class="modal-dialog modal-dialog-centered window-popup contact-tutor"
        role="document"
      >
        <div class="modal-content">
          <div class="modal-body">
            <div class="edit-my-poll-content">
              <form
                class="resume-form"
                #contactForm="ngForm"
                (ngSubmit)="sendMessage(contactForm)"
              >
                <div class="row">
                  <div
                    class="col col-12 col-xl-12 col-lg-12 col-md-12 col-sm-12"
                  >
                    <div class="cancel-button"
                    id="CloseButton"
                    data-dismiss="modal">
                      <i class="fas fa-window-close"></i>
                    </div>
                    <h3>Envía un mensaje al tutor para contactarte !</h3>
                    <p>
                      Una vez envies el mensajes el tutor aparecerá disponible
                      en tu chat para una mejor comunicación
                    </p>
                    <div class="form-group label-floating is-empty">
                      <textarea
                        class="form-control"
                        placeholder="Tu mensaje"
                        [(ngModel)]="contactMessage"
                        name="contactMessage"
                        
                      ></textarea>
                    </div>
                    
                    <button
                      class="btn btn-primary btn-lg full-width modal-button"
                       
                      
                      type="submit"
                     
                      >Enviar</button
                    >
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>